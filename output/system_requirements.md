# システム要件定義書

## システム概要

本システムは、農業における収支管理・予測の自動化を実現するAIダッシュボードです。既存農家は必須5項目（品目・地域・面積・売上・単価）の3分入力で年間収支予測と月別見込み、品目別収益性ランキングを即座に取得できます。新規就農者は希望条件から5年収支計画と青年等就農計画書PDFを自動生成します。地域・同規模のベンチマーク比較により改善提案を提供し、従来の「記録止まり」から「意思決定支援」への転換を実現します。データネットワーク効果により使用者が増えるほど予測精度が向上し、農業経営の効率化と新規就農支援を同時に促進するプラットフォームです。

1. システムの目的
   - 解決する具体的な課題：農家の収支予測困難、記録の継続性問題、ベンチマーク不足、新規就農計画作成の煩雑さ
   - 目標とする成果：3分入力での年間収支予測実現、新規就農計画書の自動生成、農業経営の意思決定支援
   - 期待されるビジネスインパクト：農業生産性向上、新規就農者増加、農業DXの推進

2. 主な機能
   - コア機能：収支予測AI、月別見込み可視化、品目別収益性分析、新規就農計画生成、計画書PDF出力
   - 差別化機能：最小入力での高精度予測、地域ベンチマーク比較、データネットワーク効果
   - 付加価値機能：シナリオ比較、参考単価サジェスト

3. 提供する価値
   - ユーザーにとっての直接的価値：入力負荷軽減（3分）、即時の収支見込み把握、稼ぎ頭品目の特定、計画書自動生成
   - ビジネスにとっての価値：データ蓄積による予測精度向上、SaaS課金モデル、相互強化する顧客セグメント
   - social価値：農業生産性向上、新規就農促進、地域農業の持続可能性向上

4. 実現方法の概要
   - 主要なテクノロジー要素：機械学習（予測モデル）、Web技術、PDF生成、データベース、外部API連携
   - 重要なインテグレーションポイント：気象データAPI、市場価格API、決済システム、認証システム
   - スケーラビリティへの考慮：マイクロサービス設計、クラウドネイティブ、AI学習の自動化

## 情報の前提と仮定

### 分析に使用した情報源
- `デザイン.md`：UIデザインコンセプト、カラーパレット、ユーザビリティガイドライン
- `バリュープロポジション.md`：顧客ジョブ・ペイン・ゲイン、ソリューション設計
- `リーンキャンバス.md`：ビジネスモデル、収益構造、顧客セグメント、競争優位性
- `要件定義所.md`：技術仕様、機能要件、非機能要件、データモデル

### 主要な仮定
- 初期ターゲットユーザー：既存農家1,000人、新規就農者100人/年を想定
- パイロット対象：岩手県のぶどう農家から開始し、段階的に品目・地域を拡大
- 技術的制約：WebベースのSPAで開発、モバイル対応必須
- データ学習：β期間中は無料提供でデータ蓄積、本課金後は継続的学習により精度向上
- 予算・期間：10週間のMVP開発期間、小規模開発チーム想定

## 機能要件

### 既存農家向け「収支管理AIダッシュボード」

#### 必須入力機能（3分完了目標）
- 品目選択（ドロップダウン + 自由入力）
- 地域設定（都道府県・市町村選択）
- 栽培面積入力（単位変換対応：㎡/a/ha）
- 年間売上合計入力
- 平均単価入力（参考単価サジェスト機能付き）

#### 任意詳細入力機能
- 収穫量詳細（kg/箱単位）
- コスト内訳（資材費・光熱費・人件費・設備費）
- 作業スケジュール（主要作業の月別登録）

#### 予測・分析機能
- 年間収支予測（前年同月比表示）
- 月別売上見込みグラフ（繁忙期可視化）
- 品目別収益性ランキング
- コスト内訳円グラフ・利益率表示
- 地域ベンチマーク比較（匿名統計）

#### データ出力機能
- CSV/PDF形式でのレポート出力
- 金融機関向け説明資料フォーマット

### 新規就農者向け「就農計画AIジェネレーター」

#### 計画生成機能
- 希望条件入力（品目・地域・面積・予算・目標年収・経験）
- 5年収支予測の自動生成
- 設備投資計画・回収期間計算
- 栽培スケジュール生成（簡易版）
- リスク分析（気象・価格・病害虫）

#### 公的書類生成機能
- 青年等就農計画書PDF自動生成
- 申請書フォーマット対応
- 署名欄・押印対応レイアウト

### 共通機能

#### 認証・ユーザー管理
- メール/パスワード認証
- Google/LINE連携認証
- ユーザープロフィール管理

#### データ管理
- 実績データの履歴管理
- バックアップ・復元機能
- データインポート/エクスポート

## 非機能要件

### パフォーマンス要件
- レスポンスタイム：主要画面3秒以内（P95）、PDF生成10秒以内
- 同時接続：初期1,000ユーザー、将来的に10,000ユーザー対応
- 可用性：99.5%以上（月間ダウンタイム3.6時間以内）
- データ処理：必須5項目入力から予測表示まで3秒以内

### スケーラビリティ要件
- ユーザー数：初期1,000人→1年後5,000人→3年後20,000人を想定
- データ蓄積：年間100万レコード処理対応
- 地域拡大：全47都道府県対応、主要作物20品目対応

### セキュリティ要件
- 通信暗号化：TLS 1.3以上
- データ暗号化：保存時AES-256暗号化
- 認証：多要素認証対応
- プライバシー：個人情報の匿名化処理、GDPR準拠

### ユーザビリティ要件
- レスポンシブデザイン：PC/タブレット/スマートフォン対応
- ブラウザ対応：Chrome、Safari、Firefox、Edge最新2バージョン
- アクセシビリティ：WCAG 2.1 AA準拠
- 操作性：必須入力3分以内完了、直感的なナビゲーション

### 保守性・拡張性要件
- API設計：RESTful API、OpenAPI仕様書
- 外部連携：気象API、市場価格API、決済API対応
- データベース：PostgreSQL、時系列データ対応
- 監視：ログ収集、メトリクス監視、アラート機能

## 技術スタック

### フロントエンド
- **React 18 + TypeScript**
  - 選定理由：コンポーネント再利用性、型安全性、豊富なエコシステム
  - 状態管理：Redux Toolkit（複雑な状態管理）
  - UIライブラリ：Material-UI v5（高品質なコンポーネント、アクセシビリティ対応）
  - チャート：Chart.js（軽量、カスタマイズ性）

### バックエンド
- **Node.js + Express + TypeScript**
  - 選定理由：フロントエンドとの技術統一、非同期処理、豊富なライブラリ
  - API設計：RESTful API、OpenAPI 3.0
  - 認証：Passport.js（多様な認証プロバイダー対応）
  - PDF生成：Puppeteer（ヘッドレスChrome、高品質PDF）

### データベース・データ処理
- **PostgreSQL 14+**
  - 選定理由：ACID準拠、JSON対応、地理空間データ対応、スケーラビリティ
  - ORM：Prisma（型安全、マイグレーション管理）
  - 時系列データ：TimescaleDB拡張（パフォーマンス最適化）

### AI・機械学習
- **Python + FastAPI**
  - 機械学習：scikit-learn、pandas（初期モデル）
  - 将来拡張：TensorFlow/PyTorch（深層学習モデル）
  - 選定理由：豊富なMLライブラリ、高性能API、Node.jsとの連携容易

### インフラストラクチャ
- **AWS クラウド**
  - コンピューティング：ECS Fargate（コンテナオーケストレーション）
  - データベース：RDS PostgreSQL（マネージドサービス）
  - ストレージ：S3（ファイル保存）、CloudFront（CDN）
  - 監視：CloudWatch、AWS X-Ray
  - 選定理由：スケーラビリティ、運用負荷軽減、セキュリティ

### 開発・運用
- **Docker + Docker Compose**（開発環境統一）
- **GitHub Actions**（CI/CD）
- **ESLint + Prettier**（コード品質）
- **Jest + Testing Library**（テスト）

### 外部API連携
- **気象データ：JMA API**（気象庁）
- **決済：Stripe**（サブスクリプション課金）
- **認証：Auth0**（エンタープライズ向け拡張）

## 開発ロードマップ

### Phase 1: MVP開発（Week 1-10）

#### Week 1-2: 基盤設計
- データベース設計・API設計
- UI/UXワイヤーフレーム確定
- 開発環境構築（Docker、CI/CD）

#### Week 3-5: コア機能開発
- 必須5項目入力フォーム
- 基本的な収支予測アルゴリズム（v0）
- 月別見込みグラフ・品目別ランキング

#### Week 6-7: 拡張機能開発
- 詳細入力機能（任意項目）
- コスト内訳・利益率表示
- 参考単価サジェスト機能

#### Week 8-9: 新規就農者機能
- 計画生成アルゴリズム
- PDF出力機能（青年等就農計画書）
- 5年収支予測・設備計画

#### Week 10: パイロット・フィードバック
- 岩手県ぶどう農家での実証
- ユーザビリティテスト
- フィードバック反映・調整

### Phase 2: 機能拡張（Month 3-6）

#### Month 3-4: 予測精度向上
- 外部API連携（気象データ、市場価格）
- 機械学習モデルv1導入
- ベンチマーク機能強化

#### Month 5-6: ユーザビリティ向上
- モバイルアプリ開発（PWA）
- 通知機能（価格アラート、作業リマインド）
- 多言語対応（英語）

### Phase 3: スケール・収益化（Month 6-12）

#### Month 6-9: 地域・品目拡大
- 全国主要地域対応
- 主要作物20品目対応
- 地域特性を考慮した予測モデル

#### Month 9-12: エンタープライズ機能
- JA（農協）向け管理機能
- 複数圃場一括管理
- API提供（B2B展開）

## リスク分析

### 技術的リスク

#### 高リスク
- **AI予測精度の問題**
  - リスク：初期データ不足による予測精度低下
  - 対策：業界データ・参考データの活用、段階的精度向上、ユーザーへの精度説明
  - 軽減策：予測結果に信頼区間表示、フィードバック機能でモデル改善

#### 中リスク
- **外部API依存**
  - リスク：気象・価格APIの障害、仕様変更、料金変更
  - 対策：複数API提供者の利用、キャッシュ機能、フォールバック処理
- **スケーラビリティ問題**
  - リスク：ユーザー増加時のパフォーマンス低下
  - 対策：クラウドネイティブ設計、負荷テスト、段階的スケールアップ

### ビジネス的リスク

#### 高リスク
- **ユーザー獲得困難**
  - リスク：農家のデジタル化への抵抗、競合サービス
  - 対策：農協との連携、展示会参加、紹介プログラム、丁寧なサポート

#### 中リスク
- **継続利用率の低下**
  - リスク：初期興味後の利用離脱
  - 対策：定期的な価値提供、機能改善、コミュニティ形成
- **課金モデルの不適合**
  - リスク：農家の支払い能力・意欲とのミスマッチ
  - 対策：柔軟な価格設定、無料枠の提供、ROI明確化

### 法的・コンプライアンスリスク

#### 中リスク
- **個人情報保護**
  - リスク：農業データの機密性、GDPR・個人情報保護法対応
  - 対策：匿名化処理、暗号化、利用同意の明確化
- **農業関連法規制**
  - リスク：農地法、農業振興法等の規制変更
  - 対策：専門家との連携、法務チェック、適切な免責事項

### 運用的リスク

#### 中リスク
- **データ品質管理**
  - リスク：不正確な入力データによる予測精度低下
  - 対策：入力バリデーション、データクレンジング、ユーザー教育
- **サポート体制不足**
  - リスク：ユーザー問い合わせ対応の遅延、品質低下
  - 対策：FAQ充実、チャットボット、段階的サポート体制構築

## 追加情報リクエスト

### 高優先度

1. **具体的な開発予算・チーム構成**（要件定義への影響度：高）
   - 開発予算の上限額
   - チームメンバーのスキルレベル（フロントエンド・バックエンド・AI）
   - 外部委託の可否・範囲

2. **初期ターゲット地域・品目の詳細**（要件定義への影響度：高）
   - パイロット対象の具体的な農家数・特性
   - 対象品目の市場データ・季節性
   - 地域固有の営農慣行・制約事項

3. **競合サービス・差別化戦略**（要件定義への影響度：高）
   - 既存競合サービスの機能・価格調査結果
   - 優位性を保つための技術的・ビジネス的戦略
   - ユーザー獲得チャネルの具体的計画

### 中優先度

4. **データ取得・学習戦略**（要件定義への影響度：中）
   - 初期学習データの調達方法・コスト
   - 農家からのデータ提供インセンティブ設計
   - データ品質管理の具体的手法

5. **法的・コンプライアンス要件**（要件定義への影響度：中）
   - 農業データの取り扱いに関する法的制約
   - 青年等就農計画書の公的認定要件
   - 地域農協との連携に関する規制・慣行

### 低優先度

6. **長期ビジョン・拡張計画**（要件定義への影響度：低）
   - 3年後の事業規模・機能拡張計画
   - 海外展開の可能性・要件
   - 農業IoT・スマート農業との連携計画

これらの追加情報により、より精緻で実現可能性の高いシステム要件定義が可能になります。特に高優先度項目については、開発開始前の確認を強く推奨します。
